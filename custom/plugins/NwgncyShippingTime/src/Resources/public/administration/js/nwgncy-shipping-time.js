!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p=(window.__sw__.assetPath + '/bundles/nwgncyshippingtime/'),t(t.s="3Ot0")}({"3Ot0":function(e,n,t){"use strict";t.r(n);Shopware.Component.override("sw-product-detail",{template:"{% block sw_product_detail_content_tabs_general %}\r\n    {% parent %}\r\n    <sw-tabs-item v-if=\"product\"\r\n                  :route=\"{ name: 'sw.product.detail.nst' }\"\r\n                  :title=\"$tc('nwgncy-shipping-time.general.mainMenuItemGeneral')\">\r\n        {{ $tc('nwgncy-shipping-time.general.mainMenuItemGeneral') }}\r\n    </sw-tabs-item>\r\n{% endblock %}\r\n"});function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n,t){return(n=function(e){var n=function(e,n){if("object"!==r(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===r(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s=Shopware,l=s.Component,p=s.Mixin,c=(Shopware.Data.Criteria,Shopware.Component.getComponentHelper().mapState);l.register("sw-product-detail-nst",{template:'<div class="sw-product-detail-base">\r\n    <sw-card v-if="product && product.id"\r\n             :isLoading="isLoading"\r\n             :title="$tc(\'nwgncy-shipping-time.label.deliveryTimeBySalesChannel\')"\r\n             class="moorl-entity-grid">\r\n        <shipping-time-entity-grid entity="nwgncy_product_shipping_time"\r\n                           :defaultItem="{ productId: product.id }"\r\n                           :isLoading="isLoading">\r\n        </shipping-time-entity-grid>\r\n    </sw-card>\r\n</div>\r\n ',inject:["repositoryFactory","context"],props:{product:{type:Object,required:!0}},mixins:[p.getByName("notification"),p.getByName("placeholder")],data:function(){return{isLoading:!1}},computed:o(o({},c("swProductDetail",["product"])),{},{product:function(){var e=Shopware.State.get("swProductDetail").product;return console.log(e),console.log("product"),e.customFields||this.$set(e,"customFields",{}),e}}),methods:{createdComponent:function(){},log:function(e){console.log(e)}}}),Shopware.Module.register("sw-product-detail-nst-tab",{routeMiddleware:function(e,n){"sw.product.detail"===n.name&&n.children.push({name:"sw.product.detail.nst",path:"/sw/product/detail/:id/nst",component:"sw-product-detail-nst",meta:{parentPath:"sw.product.index"}}),e(n)}});function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,s=[],l=!0,p=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==n);l=!0);}catch(e){p=!0,i=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(p)throw i}}return s}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var h=Shopware,f=h.Component,m=(h.Mixin,Shopware.Data.Criteria);f.register("shipping-time-entity-grid",{inject:["repositoryFactory","acl"],template:'<div v-if="salesChannels && shippingItemsLoaded">\r\n\r\n    <sw-container slot="grid" rows="auto auto">\r\n        <sw-card-section>\r\n\r\n            <sw-container\r\n                columns="1fr 1fr"\r\n                gap="0 32px"\r\n            >\r\n\r\n                <sw-single-select\r\n                    :disabled="isLoading"\r\n                    :isLoading="isLoading"\r\n                    :disableSearchFunction="true"\r\n                    :label="$tc(\'nwgncy-shipping-time.label.updateAllDeliveryTimes\')"\r\n                    :options="shippingTimeOptions"\r\n                    {% if VUE3 %}\r\n                    @update:value="updateShippingTimeForEverySalesChannel($event)"\r\n                    {% else %}\r\n                    @change="updateShippingTimeForEverySalesChannel($event)"\r\n                    {% endif %}\r\n                >\r\n                </sw-single-select>\r\n            </sw-container>\r\n            <div v-for="salesChannel in salesChannels">\r\n\r\n                <sw-container\r\n                    columns="1fr 1fr"\r\n                    gap="0 32px"\r\n                >\r\n\r\n                    <sw-single-select\r\n                        :disableSearchFunction="true"\r\n                        :disabled="isLoading"\r\n                        :key="salesChannel.id"\r\n                        v-model="salesChannelsValuesForSelects[salesChannel.id]"\r\n                        :label="salesChannel.name || salesChannel.translated.name"\r\n                        {# salesChannel.name || $tc(\'saleschannel.translation\', { label: salesChannel.name }) #}\r\n                        :options="shippingTimeOptions"\r\n                        {% if VUE3 %}\r\n                        @update:value="optionSelected($event, salesChannel)"\r\n                        {% else %}\r\n                        @change="optionSelected($event, salesChannel)"\r\n                        {% endif %}\r\n                    >\r\n                    </sw-single-select>\r\n\r\n                </sw-container>\r\n\r\n            </div>\r\n        </sw-card-section>\r\n    </sw-container>\r\n</div>\r\n',props:{entity:{type:String,required:!0},defaultItem:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{shippingItemsLoaded:!1,salesChannels:null,salesChannelsValues:[],shippingTimes:null,shippingTimesBySalesChannel:[],item:null,entity:null,newEntity:null,totalCount:0,isLoading:!1}},computed:{shippingTimeOptions:function(){return[{value:0,label:this.$tc("nwgncy-shipping-time.options.shippingTimeOne")},{value:1,label:this.$tc("nwgncy-shipping-time.options.shippingTimeTwo")}]},salesChannelsValuesForSelects:function(){return this.salesChannelsValues},repository:function(){return this.repositoryFactory.create(this.entity)},salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.getShippingTimeItems(),this.getSalesChannels()},getShippingTimeItems:function(){var e=this;this.isLoading=!0;for(var n=new m,t=0,r=Object.entries(this.defaultItem);t<r.length;t++){var i=u(r[t],2),o=i[0],a=i[1];n.addFilter(m.equals(o,a))}this.repository.search(n,Shopware.Context.api).then((function(n){e.salesChannelsValues=[],n.total>0&&n.forEach((function(n){e.shippingTimesBySalesChannel[n.salesChannelId]=n,e.salesChannelsValues[n.salesChannelId]=n.shippingTime})),e.shippingItemsLoaded=!0,e.shippingTimes=n,e.isLoading=!1}))},getSalesChannels:function(){var e=this;this.isLoading=!0;var n=new m;n.addAssociation("translations"),n.addFilter(m.equals("active",1)),this.salesChannelRepository.search(n,Shopware.Context.api).then((function(n){e.salesChannels=n,e.isLoading=!1}))},log:function(e){console.log(e)},updateShippingTimeForEverySalesChannel:function(e){var n=this;this.isLoading=!0;var t=[];null!=e&&(this.salesChannels.forEach((function(r){var i=r.id,o=null;void 0!==n.shippingTimesBySalesChannel[i]?o=n.shippingTimesBySalesChannel[i]:((o=n.repository.create(Shopware.Context.api)).productId=n.defaultItem.productId,o.salesChannelId=i),o.shippingTime=parseInt(e),t.push(n.repository.save(o,Shopware.Context.api))})),Promise.all(t).then((function(){n.getSalesChannels(),n.getShippingTimeItems(),n.isLoading=!1})))},optionSelected:function(e,n){var t=this;if(null!=e){var r=n.id;void 0!==this.shippingTimesBySalesChannel[r]?this.newEntity=this.shippingTimesBySalesChannel[r]:(this.newEntity=this.repository.create(Shopware.Context.api),this.newEntity.productId=this.defaultItem.productId,this.newEntity.salesChannelId=r),this.salesChannelsValues[r]=e,this.newEntity.shippingTime=parseInt(e),this.repository.save(this.newEntity,Shopware.Context.api).then((function(){t.getShippingTimeItems()}))}}}})}});
//# sourceMappingURL=nwgncy-shipping-time.js.map