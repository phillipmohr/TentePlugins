"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["nwgncy-product-finder"],{9440:(e,t,r)=>{var o,i,n,s=r(6285),l=r(3206),a=r(8254);class d extends s.Z{init(){var e,t,r;this._client=new a.Z;const o=l.Z.querySelector(document,this.options.blockContainerSelector);this._finderForm=l.Z.querySelector(o,this.options.finderFormSelector),this._categoryFields=l.Z.querySelectorAll(o,this.options.categoryFieldSelector),this._propertyOptionsGroupsContainer=l.Z.querySelector(o,this.options.propertyOptionsGroupsContainerSelector),this._loadingContainer=l.Z.querySelector(o,this.options.loadinContainerSelector),this._selectedCategoryOption=l.Z.querySelector(o,this.options.activeCategoryFieldSelector),this._selectedCategoryOptionId=null!==(e=null===(t=this._selectedCategoryOption)||void 0===t||null===(r=t.querySelector("input"))||void 0===r?void 0:r.value)&&void 0!==e?e:null,this._propertyOptionsGroups=l.Z.querySelectorAll(o,this.options.propertyOptionsGroupsFieldSelector),this._propertyOptions=l.Z.querySelectorAll(o,this.options.propertyOptionsFieldSelector),this._propertyOptionsInputs=l.Z.querySelectorAll(o,this.options.propertyOptionSelector),this._findButton=l.Z.querySelector(o,this.options.findButton),this._minMaxOptionsGroups=l.Z.querySelectorAll(o,this.options.minMaxOptionsGroupsFieldSelector),this._selectedMinMeasuredPropertyOptions={},this._selectedMaxMeasuredPropertyOptions={};const i=l.Z.querySelector(o,this.options.activeCategoryFieldSelector);if(this._selectedCategoryOptionValue=null,i){const e=i.querySelector("input");e&&(this._selectedCategoryOptionValue=e.value)}this._selectedPropertyOptions={},this._registerEvents(),this._isLoading=!0,this.fetchAvailableOptions()}_registerEvents(){this._categoryFields.forEach((e=>{e.addEventListener("click",(()=>{if(this._selectedCategoryOption!==e){this._categoryFields.forEach((e=>{e.classList.remove("active")})),e.classList.add("active");var t=e.querySelector("input").value;this._selectedCategoryOption=e,this._selectedCategoryOptionId=t,this._selectedCategoryOptionValue=t,this.startLoading(),this.fetchAvailableOptions()}}))})),this._propertyOptionsGroups.forEach((e=>{e.querySelector(".property-group-label").addEventListener("click",(()=>{this._propertyOptionsGroups.forEach((t=>{t!==e&&t.classList.remove("open")})),e.classList.toggle("open")}))})),this._propertyOptions.forEach((e=>{const t=e.querySelector("input");t.addEventListener("change",(e=>{if(t.checked){const e=t.value,r=t.name,o=t.getAttribute("data-option-name");this._selectedPropertyOptions[r]=e;const i=document.querySelector('.js-property-group-label-name[data-property-group="'+r+'"]');i&&(i.innerHTML=o);const n=document.querySelector('.js-product-finder-property-option-group-field[data-property-group="'+r+'"]');n&&n.classList.remove("open")}}))})),this._minMaxOptionsGroups.forEach((e=>{const t=e.getAttribute("data-property-group");let r=e.querySelector(".nwgncy-finder-slider-1"),o=e.querySelector(".nwgncy-finder-slider-2"),i=e.querySelector(".nwgncy-finder-slider-range1"),n=e.querySelector(".nwgncy-finder-slider-range2"),s=e.querySelector(".nwgncy-finder-slider-dash"),l=e.querySelectorAll(".nwgncy-finder-slider-buttons span"),a=e.querySelector(".nwgncy-finder-slider-track");const d=Array.from(e.querySelector(".nwgncy-finder-slider-number").options,(e=>e.value));i.textContent=d[r.value],n.textContent=d[o.value],l.forEach((p=>{p.addEventListener("click",(()=>{var c;this.isCloserToSlider(parseInt(p.getAttribute("data-value")),r.value,o.value)?(r.value=parseInt(p.getAttribute("data-value")),i.textContent=d[r.value]):(o.value=parseInt(p.getAttribute("data-value")),n.textContent=d[o.value]),this.fillColor(r,o,l,s,a,i,n);const u=e.querySelector(".nwgncy-finder-slider-range1"),y=e.querySelector(".nwgncy-finder-slider-range2"),h=null==u||null===(c=u.style)||void 0===c?void 0:c.order;var f="",g="";"1"==h?(f=null==u?void 0:u.textContent,g=null==y?void 0:y.textContent):"3"==h&&(g=null==u?void 0:u.textContent,f=null==y?void 0:y.textContent),f&&(this._selectedMinMeasuredPropertyOptions[t]=f),g&&(this._selectedMaxMeasuredPropertyOptions[t]=g)}))})),r.addEventListener("input",(i=>{var p;this.slideOne(e,i,"nwgncy-finder-slider-range1",s,a,r,o,l,d,n);const c=e.querySelector(".nwgncy-finder-slider-range1"),u=e.querySelector(".nwgncy-finder-slider-range2"),y=null==c||null===(p=c.style)||void 0===p?void 0:p.order;var h="",f="";"1"==y?(h=null==c?void 0:c.textContent,f=null==u?void 0:u.textContent):"3"==y&&(f=null==c?void 0:c.textContent,h=null==u?void 0:u.textContent),h&&(this._selectedMinMeasuredPropertyOptions[t]=h),f&&(this._selectedMaxMeasuredPropertyOptions[t]=f)})),o.addEventListener("input",(n=>{var p;this.slideTwo(e,n,"nwgncy-finder-slider-range2",s,a,r,o,l,d,i);const c=e.querySelector(".nwgncy-finder-slider-range1"),u=e.querySelector(".nwgncy-finder-slider-range2"),y=null==c||null===(p=c.style)||void 0===p?void 0:p.order;var h="",f="";"1"==y?(h=null==c?void 0:c.textContent,f=null==u?void 0:u.textContent):"3"==y&&(f=null==c?void 0:c.textContent,h=null==u?void 0:u.textContent),h&&(this._selectedMinMeasuredPropertyOptions[t]=h),f&&(this._selectedMaxMeasuredPropertyOptions[t]=f)})),this.setElementOrder(i,s,n)})),this._findButton.addEventListener("click",(e=>{var t="";const r=Object.values(this._selectedPropertyOptions).flat();this._selectedCategoryOptionValue&&r.push(this._selectedCategoryOptionValue);const o=r.filter((e=>""!==e)).join("|");o&&(t="properties="+encodeURIComponent(o));var i=[];for(var n in this._selectedMinMeasuredPropertyOptions)this._selectedMinMeasuredPropertyOptions.hasOwnProperty(n)&&i.push(encodeURIComponent("min-property["+n+"]")+"="+this._selectedMinMeasuredPropertyOptions[n]);for(var n in this._selectedMaxMeasuredPropertyOptions)this._selectedMaxMeasuredPropertyOptions.hasOwnProperty(n)&&i.push(encodeURIComponent("max-property["+n+"]")+"="+this._selectedMaxMeasuredPropertyOptions[n]);var s=i.join("&");s&&(t?t+="&"+s:t=s);const l=this._finderForm.getAttribute("data-sc-base-url");var a="";l&&(a=l);var d="Products";this._findButton.getAttribute("data-target-cat")&&(d=this._findButton.getAttribute("data-target-cat"));const p=`${a}/${d}/?${t}`;window.location.href=p}))}fetchAvailableOptions(){var e="",t="";if(this._selectedCategoryOptionValue&&(t=encodeURIComponent(this._selectedCategoryOptionValue)),t)e=`options=${t}`;const r=this._finderForm.getAttribute("data-sc-base-url");var o="";r&&(o+=r);const i=this._finderForm.getAttribute("data-available-options-route");var n="/";i&&(n=i);const s=`${o}${n}?${e}`;this._client.get(s,this.availableOptionsHandler.bind(this))}availableOptionsHandler(e){try{const t=JSON.parse(e);if(t&&t.availableOptionIds&&Array.isArray(t.availableOptionIds)){const e=t.availableOptionIds;this._propertyOptionsGroups.forEach((t=>{var r=0;const o=t.getAttribute("data-property-group");t.querySelectorAll(".js-finder-property-option-input").forEach((t=>{const o=t.value;e.includes(o)&&r++})),0==r?(t.style.display="none",delete this._selectedPropertyOptions[o]):t.style.display="flex"})),this._minMaxOptionsGroups.forEach((t=>{var r=0;const o=t.getAttribute("data-property-group");t.querySelectorAll(".nwgncy-finder-slider-number option").forEach((t=>{const o=t.id;e.includes(o)&&r++})),0==r?(t.style.display="none",delete this._selectedMinMeasuredPropertyOptions[o],delete this._selectedMaxMeasuredPropertyOptions[o]):t.style.display="flex"}))}}catch(e){}this.finishLoading()}startLoading(){this._propertyOptionsGroupsContainer.style.display="none",this._loadingContainer.style.display="flex",this._isLoading=!0}finishLoading(){this._propertyOptionsGroupsContainer.style.display="flex",this._loadingContainer.style.display="none",this._isLoading=!1}fillColor(e,t,r,o,i,n,s){let l=e.value/t.max*100,a=t.value/t.max*100;i.style.boxShadow="",i.style.background=`linear-gradient(to right, #f5f5f5 ${l}% , #2a77da ${l}% , #2a77da ${a}%, #f5f5f5 ${a}%)`,l>=a?(i.style.background=`linear-gradient(to right, #f5f5f5 ${a}% , #2a77da ${a}% , #2a77da ${l}%, #f5f5f5 ${l}%)`,r.forEach((function(r){t.value<parseInt(r.getAttribute("data-value"))&&e.value>parseInt(r.getAttribute("data-value"))?r.style.background="#2a77da":r.style.background="linear-gradient(180deg,#f5f5f5,#f9f9f9)"})),this.setElementOrder(s,o,n)):(this.setElementOrder(n,o,s),r.forEach((function(r){e.value<parseInt(r.getAttribute("data-value"))&&t.value>parseInt(r.getAttribute("data-value"))?r.style.background="#2a77da":r.style.background="linear-gradient(180deg,#f5f5f5,#f9f9f9)"})))}setElementOrder(e,t,r){e.style.order=1,t.style.order=2,r.style.order=3}isCloserToSlider(e,t,r){return Math.abs(e-t)<Math.abs(e-r)}slideOne(e,t,r,o,i,n,s,l,a,d){let p=e.querySelector("."+r);p.textContent=a[t.target.value],this.fillColor(n,s,l,o,i,p,d)}slideTwo(e,t,r,o,i,n,s,l,a,d){let p=e.querySelector("."+r);p.textContent=a[t.target.value],this.fillColor(n,s,l,o,i,d,p)}}o=d,n={blockContainerSelector:".cms-block-nwgncy-product-finder",finderFormSelector:"#product-finder-form",categoryFieldSelector:".js-product-finder-category-field",activeCategoryFieldSelector:".js-product-finder-category-field.active",propertyOptionsGroupsContainerSelector:".section.property-options",propertyOptionsGroupsFieldSelector:".section.property-options .js-product-finder-property-option-group-field",propertyOptionsFieldSelector:".options-list .js-option-field",findButton:".js-btn-find-products",propertyOptionSelector:".js-finder-property-option-input",minMaxOptionsGroupsFieldSelector:".section.property-options .js-product-finder-property-option-group-slider-field",loadinContainerSelector:".cms-block-nwgncy-product-finder .loading"},(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i="options"))in o?Object.defineProperty(o,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[i]=n;window.PluginManager.register("ProductFinderPlugin",d,"[data-product-finder]")}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=9440,e(e.s=t);var t}));e.O()}]);