"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["nwgncy-products-configurator"],{9949:(e,t,r)=>{var s,i,o,n=r(6285),a=r(3206),l=r(8254);class c extends n.Z{init(){var e,t,r;this._client=new l.Z;const s=a.Z.querySelector(document,this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(s,"Listing"),this.listingPagination=window.PluginManager.getPluginInstanceFromElement(s,"ListingPagination"),this._searchUrls={filter:window.router["widgets.search.filter"],data:window.router["widgets.search.pagelet.v2"]},this._defaultDataAndFilterUrls={filter:null===(e=this.listing.options)||void 0===e?void 0:e.filterUrl,data:null===(t=this.listing.options)||void 0===t?void 0:t.dataUrl},this.blockContainer=a.Z.querySelector(document,this.options.blockContainerSelector),this.listingElement=s,this._selectedPropertyOptions={},this._selectedMinMeasuredPropertyOptions={},this._selectedMaxMeasuredPropertyOptions={},this._selectedPropertyCheckboxOptions=[],this._selectedCategoryOption=null,this._selectedCadOption=null,this._searchQuery="",this._fetchDefaultCategory=!1,this._defaultCategoryPropertyId="",this._toggleButton=a.Z.querySelector(document,this.options.toggleButtonSelector),this._contentContainer=a.Z.querySelector(document,this.options.contentContainerSelector),this._loaderContainer=a.Z.querySelector(document,this.options.loaderContainerSelector),this._categories=a.Z.querySelectorAll(this._contentContainer,this.options.categoriesSelector),this._measuredPropertySelectContainer=a.Z.querySelector(this._contentContainer,this.options.measuredPropertySelectContainerSelector),this._measuredPropertySelects=a.Z.querySelectorAll(this._contentContainer,this.options.measuredPropertySelectSelector),this._measuredPropertyMinSelects=a.Z.querySelectorAll(this._contentContainer,this.options.measuredPropertyMinSelectSelector),this._measuredPropertyMaxSelects=a.Z.querySelectorAll(this._contentContainer,this.options.measuredPropertyMaxSelectSelector),this._propertySelects=a.Z.querySelectorAll(this._contentContainer,this.options.propertySelectSelector),this._propertyCheckboxes=a.Z.querySelectorAll(this._contentContainer,this.options.propertyCheckboxSelector,!1),this._cadCheckbox=a.Z.querySelectorAll(this._contentContainer,this.options.cadCheckboxSelector),this._measuredPropertySelectsOptionsMin=a.Z.querySelectorAll(this._contentContainer,this.options.measuredPropertySelectOptionMinSelector),this._measuredPropertySelectsOptionsMax=a.Z.querySelectorAll(this._contentContainer,this.options.measuredPropertySelectOptionMaxSelector),this._propertySelectsOptions=a.Z.querySelectorAll(this._contentContainer,this.options.propertySelectOptionSelector),this._propertySelectsOptionsResets=a.Z.querySelectorAll(this._contentContainer,this.options.propertySelectOptionResetSelector),this._propertySelectsOptionsExceptReset=a.Z.querySelectorAll(this._contentContainer,this.options.propertySelectOptionExceptResetSelector),this._measuredPropertySelectsOptionsExceptReset=a.Z.querySelectorAll(this._contentContainer,this.options.measuredPropertySelectOptionsExceptResetSelector),this._checkboxesAndRadios=a.Z.querySelectorAll(this._contentContainer,this.options.checkboxesAndRadiosSelector),this._selectInputs=a.Z.querySelectorAll(this._contentContainer,this.options.selectInputsSelector),this._resetButton=a.Z.querySelector(this._contentContainer,this.options.resetButtonSelector),this._searchInput=a.Z.querySelector(this._contentContainer,this.options.searchInputSelector),this._searchButton=a.Z.querySelector(this._contentContainer,this.options.searchButtonSelector),this._configuratorForm=a.Z.querySelector(this._contentContainer,this.options.configuratorFormSelector),this._registerEvents(),null!==(r=this.listing)&&void 0!==r&&r._urlFilterParams&&this._initUrlSelectedProperties(this.listing._urlFilterParams),this.refreshListing(),this.fetchAvailableOptions()}_registerEvents(){this._toggleButton.addEventListener("click",(e=>{this._toggleButtonTrigger()})),this._categories.forEach((e=>{e.addEventListener("change",(e=>{if(e.target.checked){const t=e.target.value;this._selectedCategoryOption=t,this.refreshListing(),this.fetchAvailableOptions()}}))})),this._measuredPropertyMinSelects.forEach((e=>{e.addEventListener("change",(t=>{const r=e.options[e.selectedIndex],s=r.value,i=e.id,o=i.replace("configurator-property-group-","").replace("-min",""),n=i.replace("-min","-max");if(r.classList.contains("reset"))e.querySelectorAll("option:not(.reset)").forEach((function(e){e.selected=!1})),delete this._selectedMinMeasuredPropertyOptions[o],delete this._selectedMaxMeasuredPropertyOptions[o];else{const e=this.parseNumberFromString(s);null!==e&&(this._selectedMinMeasuredPropertyOptions[o]=e,this.addMissingRangeFilter(o,"#"+n,"max"))}this.refreshListing(),this.fetchAvailableOptions()}))})),this._measuredPropertyMaxSelects.forEach((e=>{e.addEventListener("change",(t=>{const r=e.options[e.selectedIndex],s=r.value,i=e.id,o=i.replace("configurator-property-group-","").replace("-max",""),n=i.replace("-max","-min");if(r.classList.contains("reset"))e.querySelectorAll("option:not(.reset)").forEach((function(e){e.selected=!1})),delete this._selectedMaxMeasuredPropertyOptions[o],delete this._selectedMinMeasuredPropertyOptions[o];else{const e=this.parseNumberFromString(s);null!==e&&(this._selectedMaxMeasuredPropertyOptions[o]=e,this.addMissingRangeFilter(o,"#"+n,"max"))}this.refreshListing(),this.fetchAvailableOptions()}))})),this._propertySelects.forEach((e=>{e.addEventListener("change",(t=>{const r=e.options[e.selectedIndex],s=r.value,i=e.id.replace("configurator-property-group-","");r.classList.contains("reset")?(e.querySelectorAll("option:not(.reset)").forEach((function(e){e.selected=!1})),delete this._selectedPropertyOptions[i]):this._selectedPropertyOptions[i]=s,this.refreshListing(),this.fetchAvailableOptions()}))})),!1!==this._propertyCheckboxes&&this._propertyCheckboxes.forEach((e=>{e.addEventListener("change",(t=>{const r=e.value;e.checked?this._selectedPropertyCheckboxOptions.includes(r)||this._selectedPropertyCheckboxOptions.push(r):this._selectedPropertyCheckboxOptions=this._selectedPropertyCheckboxOptions.filter((e=>e!==r)),this.refreshListing(),this.fetchAvailableOptions()}))})),this._cadCheckbox.forEach((e=>{e.addEventListener("change",(t=>{e.value;e.checked?this._selectedCadOption=!0:this._selectedCadOption=null,this.refreshListing(),this.fetchAvailableOptions()}))})),this._configuratorForm.addEventListener("submit",(e=>{e.preventDefault()})),this._resetButton.addEventListener("click",(e=>{this._resetFilters()})),this._searchButton.addEventListener("click",(e=>this._searchHandler())),this._searchInput.addEventListener("keyup",(e=>{"Enter"===e.key&&this._searchHandler()})),this._searchInput.addEventListener("blur",(e=>{this._searchHandler()}))}_resetFilters(){this._selectInputs.forEach((e=>{e.selectedIndex=0})),!1!==this._propertyCheckboxes&&this._propertyCheckboxes.forEach((e=>{e.checked=!1})),this._categories.forEach((e=>{e.checked=!1})),this._selectedPropertyOptions={},this._selectedMinMeasuredPropertyOptions={},this._selectedMaxMeasuredPropertyOptions={},this._selectedPropertyCheckboxOptions=[],this._selectedCategoryOption=null,this._searchQuery="",this._searchInput.value="",this.listing.options.filterUrl=this._defaultDataAndFilterUrls.filter,this.listing.options.dataUrl=this._defaultDataAndFilterUrls.data,this.fetchAvailableOptions(),this.refreshListing()}changeListing(e=!0,t={}){this._buildRequest(e,t)}addMissingRangeFilter(e,t,r){const s=a.Z.querySelector(document,t,!1);if(s){const t=s.selectedIndex;if(void 0===t||0==t){const t=s.options[s.options.length-1].value,i=this.parseNumberFromString(t);null!==i&&("max"==r?this._selectedMaxMeasuredPropertyOptions[e]=i:this._selectedMinMeasuredPropertyOptions[e]=i)}}}refreshListing(){const e={},t={},r={},s=Object.values(this._selectedPropertyOptions).flat(),i=new Set(s.concat(this._selectedPropertyCheckboxOptions));null!==this._selectedCategoryOption&&i.add(this._selectedCategoryOption);const o=Array.from(i).filter((e=>""!==e)).join("|");if(o&&(r.properties=o),this._selectedMinMeasuredPropertyOptions){const t=Object.entries(this._selectedMinMeasuredPropertyOptions).map((([e,t])=>[`min-property[${e}]`,t]));Object.assign(e,Object.fromEntries(t))}if(this._selectedMaxMeasuredPropertyOptions){const e=Object.entries(this._selectedMaxMeasuredPropertyOptions).map((([e,t])=>[`max-property[${e}]`,t]));Object.assign(t,Object.fromEntries(e))}if(this._searchQuery){const e={search:this._searchQuery};Object.assign(r,e)}Object.assign(r,e,t),void 0===r.properties&&(r.properties="018a6a875d9b77a88cc7edab549b33ce"),this._fetchDefaultCategory&&(r.properties=r.properties+"|018a6a875d9b77a88cc7edab549b33ce",this._fetchDefaultCategory=!1),this._selectedCadOption&&(r.hasCadFile="1"),this.listing.changeListing(!0,{p:1,...r})}_initUrlSelectedProperties(e){var t=!1;if(null!=e&&e.properties){const t=e.properties.split("|");if(t){const e=this._propertySelectsOptions;if(Array.from(e).filter((e=>t.includes(e.value))).forEach((e=>{const t=e.parentNode;if(t){const r=t.id.replace("configurator-property-group-","");e.selected=!0,this._selectedPropertyOptions[r]=e.value}})),!1!==this._propertyCheckboxes){const e=this._propertyCheckboxes;Array.from(e).filter((e=>t.includes(e.value))).forEach((e=>{const t=e.value;e.checked=!0,this._selectedPropertyCheckboxOptions.includes(t)||this._selectedPropertyCheckboxOptions.push(t)}))}const r=this._categories,s=Array.from(r).find((e=>t.includes(e.value)));if(s){const e=s.value;s.checked=!0,this._selectedCategoryOption=e}}}if(null!=e&&e.search){const r=e.search;this.listing.options.filterUrl=this._searchUrls.filter,this.listing.options.dataUrl=this._searchUrls.data,this._searchQuery=r,this._searchInput.value=r,t=!0}this._measuredPropertySelects.forEach((t=>{const r=t.id.replace("configurator-property-group-","").replace(/-(min|max)$/,""),s=`min-property[${r}]`,i=`max-property[${r}]`;if(t.classList.contains("min")&&e[s]){const i=e[s];t.value=i,this._selectedMinMeasuredPropertyOptions[r]=i}else if(t.classList.contains("max")&&e[i]){const s=e[i];t.value=s,this._selectedMaxMeasuredPropertyOptions[r]=s}})),t&&this.refreshListing()}_toggleButtonTrigger(){"none"!==this._contentContainer.style.display?(this._toggleButton.classList.remove("open"),this._contentContainer.style.display="none"):(this._toggleButton.classList.add("open"),this._contentContainer.style.display="block")}fetchAvailableOptions(){const e={},t={},r=Object.values(this._selectedPropertyOptions).flat(),s=new Set(r.concat(this._selectedPropertyCheckboxOptions));null!==this._selectedCategoryOption&&s.add(this._selectedCategoryOption);const i=Array.from(s).filter((e=>""!==e)).join("|");for(const t in this._selectedMinMeasuredPropertyOptions)this._selectedMinMeasuredPropertyOptions.hasOwnProperty(t)&&(e[t]=this._selectedMinMeasuredPropertyOptions[t][0]);for(const e in this._selectedMaxMeasuredPropertyOptions)this._selectedMaxMeasuredPropertyOptions.hasOwnProperty(e)&&(t[e]=this._selectedMaxMeasuredPropertyOptions[e][0]);var o=[];if(i){const e=encodeURIComponent(i);o.push(`options=${e}`)}if(this._selectedMinMeasuredPropertyOptions&&!this.isEmptyObject(e)){const t=JSON.stringify(e),r=encodeURIComponent(t);o.push(`minValues=${r}`)}if(this._selectedMaxMeasuredPropertyOptions&&!this.isEmptyObject(t)){const e=JSON.stringify(t),r=encodeURIComponent(e);o.push(`maxValues=${r}`)}var n=o.join("&");const a=this._configuratorForm.getAttribute("data-sc-base-url");var l="";a&&(l=a);const c=this._configuratorForm.getAttribute("action");var p="/";c&&(p=c);const h=`${l}${p}?${n}`;this.startLoading(),this._client.get(h,this.availableOptionsHandler.bind(this))}availableOptionsHandler(e){try{const t=JSON.parse(e);if(t){const e=t.availableOptionIds,r=t.selectDefaultCategory,s=t.defaultCategoryId;e&&Array.isArray(e)&&(this._propertySelectsOptionsExceptReset.forEach((t=>{e.includes(t.value)?t.style.display="block":(t.style.display="none",t.selected=!1)})),this._measuredPropertySelectsOptionsExceptReset.forEach((t=>{e.includes(t.id)?t.style.display="block":(t.style.display="none",t.selected=!1)})),this._categories.forEach((t=>{e.includes(t.value)?t.checked=!0:t.checked=!1})),this.toggleMeasuredSelectsVisibility(),1==r&&(this._fetchDefaultCategory=!0,this._defaultCategoryPropertyId=s,this.refreshListing()))}}catch(e){}this.stopLoading()}startLoading(){this._configuratorForm.style.opacity=0,this._configuratorForm.style.pointerEvents="none",this._loaderContainer.style.opacity=1}stopLoading(){setTimeout((()=>{this._configuratorForm.style.opacity=1,this._configuratorForm.style.pointerEvents="unset",this._loaderContainer.style.opacity=0}),200)}parseNumberFromString(e){const t=e.match(/[-+]?[0-9]*\.?[0-9]+|[0-9]*,?[0-9]+/g);return t?t.map((e=>{const t=e.replace(",",".");return t.includes(".")?parseFloat(t):parseInt(t,10)})):null}isEmptyObject(e){return 0===Object.keys(e).length}toggleMeasuredSelectsVisibility(){this._measuredPropertySelects.forEach((e=>{e.parentNode.parentNode.style.display=Array.from(e.options).filter((e=>!e.classList.contains("reset"))).every((e=>"none"==e.style.display))?"none":"block"}));const e=this._measuredPropertySelectContainer.querySelectorAll(".field");this._measuredPropertySelectContainer.style.display=Array.from(e).every((e=>"none"==e.style.display))?"none":"flex"}_searchHandler(){const e=this._searchInput.value;this._searchQuery=e,e?(this.listing.options.filterUrl=this._searchUrls.filter,this.listing.options.dataUrl=this._searchUrls.data):(this.listing.options.filterUrl=this._defaultDataAndFilterUrls.filter,this.listing.options.dataUrl=this._defaultDataAndFilterUrls.data),this.startLoading(),this.refreshListing(),setTimeout((()=>{this.stopLoading()}),200)}}s=c,o={blockContainerSelector:".cms-block-nwgncy-products-configurator",parentFilterPanelSelector:".cms-element-product-listing-wrapper",categoriesSelector:".js-configurator-category",measuredPropertySelectSelector:".js-configurator-measured-property",measuredPropertySelectContainerSelector:".js-configurator-measured-container",measuredPropertyMinSelectSelector:".js-configurator-measured-property.min",measuredPropertyMaxSelectSelector:".js-configurator-measured-property.max",propertySelectSelector:".js-configurator-property",propertyCheckboxSelector:".js-configurator-property-checkbox",cadCheckboxSelector:".js-configurator-cad-checkbox",measuredPropertySelectOptionMinSelector:".js-configurator-measured-property.min option",measuredPropertySelectOptionMaxSelector:".js-configurator-measured-property.max option",measuredPropertySelectOptionsExceptResetSelector:".js-configurator-measured-property option:not(.reset)",propertySelectOptionSelector:".js-configurator-property option",propertySelectOptionExceptResetSelector:".js-configurator-property option:not(.reset)",propertySelectOptionResetSelector:".js-configurator-property option.reset",productsConfiguratorContainerSelector:".cms-element-product-listing-wrapper",toggleButtonSelector:".js-products-configurator-toggle",contentContainerSelector:".cms-block-nwgncy-products-configurator .content",loaderContainerSelector:".cms-block-nwgncy-products-configurator .loading",checkboxesAndRadiosSelector:'input[type="checkbox"], input[type="radio"]',selectInputsSelector:"select",resetButtonSelector:".js-btn-reset-filters",searchInputSelector:".js-configurator-search-input",searchButtonSelector:".js-configurator-search-button",configuratorFormSelector:"#configurator-form"},(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i="options"))in s?Object.defineProperty(s,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[i]=o;var p=r(6268);class h extends p.Z{onChangePage(e){const t=new URL(window.location.href).searchParams,r=Object.fromEntries([...t].filter((([e])=>"p"!==e)));this.tempValue=e.target.value,this.listing.changeListing(!0,{...r}),this.tempValue=null}}const u=window.PluginManager;u.register("ProductConfiguratorPlugin",c,"[data-products-configurator]"),u.override("ListingPagination",h,"[data-listing-pagination]")},6536:(e,t,r)=>{r.d(t,{Z:()=>l});var s,i,o,n=r(6285),a=r(3206);class l extends n.Z{_init(){super._init(),this._validateMethods();const e=a.Z.querySelector(document,this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(e,"Listing"),this.listing.registerFilter(this),this._preventDropdownClose()}_preventDropdownClose(){const e=a.Z.querySelector(this.el,this.options.dropdownSelector,!1);e&&e.addEventListener("click",(e=>{e.stopPropagation()}))}_validateMethods(){if("function"!=typeof this.getValues)throw new Error(`[${this._pluginName}] Needs the method "getValues"'`);if("function"!=typeof this.getLabels)throw new Error(`[${this._pluginName}] Needs the method "getLabels"'`);if("function"!=typeof this.reset)throw new Error(`[${this._pluginName}] Needs the method "reset"'`);if("function"!=typeof this.resetAll)throw new Error(`[${this._pluginName}] Needs the method "resetAll"'`)}}s=l,o={parentFilterPanelSelector:".cms-element-product-listing-wrapper",dropdownSelector:".filter-panel-item-dropdown"},(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i="options"))in s?Object.defineProperty(s,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[i]=o},6268:(e,t,r)=>{r.d(t,{Z:()=>p});var s,i,o,n=r(3206),a=r(6536),l=r(1857),c=r.n(l);class p extends a.Z{init(){this._initButtons(),this.tempValue=null}_initButtons(){this.buttons=n.Z.querySelectorAll(this.el,".pagination input[type=radio]",!1),this.buttons&&this._registerButtonEvents()}_registerButtonEvents(){this.buttons.forEach((e=>{e.addEventListener("change",this.onChangePage.bind(this))}))}onChangePage(e){this.tempValue=e.target.value,this.listing.changeListing(),this.tempValue=null}reset(){}resetAll(){}getValues(){return null!==this.tempValue?{p:this.tempValue}:{p:1}}afterContentChange(){this._initButtons()}getLabels(){return[]}setValuesFromUrl(e){let t=!1;return this.tempValue=1,e.p&&parseInt(e.p)!==parseInt(this.tempValue)&&(this.tempValue=parseInt(e.p),t=!0),t}}s=p,i="options",o=c()(a.Z.options,{page:1}),(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in s?Object.defineProperty(s,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[i]=o}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=9949,e(e.s=t);var t}));e.O()}]);